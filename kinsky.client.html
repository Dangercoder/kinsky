<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>kinsky.client documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Kinsky</span> <span class="project-version">0.1.10-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>kinsky</span></div></div></li><li class="depth-2 branch"><a href="kinsky.async.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>async</span></div></a></li><li class="depth-2 current"><a href="kinsky.client.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>client</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="kinsky.client.html#var--.3Eoffset-metadata"><div class="inner"><span>-&gt;offset-metadata</span></div></a></li><li class="depth-1"><a href="kinsky.client.html#var--.3Erecord"><div class="inner"><span>-&gt;record</span></div></a></li><li class="depth-1"><a href="kinsky.client.html#var--.3Etopic-partition"><div class="inner"><span>-&gt;topic-partition</span></div></a></li><li class="depth-1"><a href="kinsky.client.html#var--.3Etopics"><div class="inner"><span>-&gt;topics</span></div></a></li><li class="depth-1"><a href="kinsky.client.html#var-consumer"><div class="inner"><span>consumer</span></div></a></li><li class="depth-1"><a href="kinsky.client.html#var-consumer-.3Edriver"><div class="inner"><span>consumer-&gt;driver</span></div></a></li><li class="depth-1"><a href="kinsky.client.html#var-consumer-records-.3Edata"><div class="inner"><span>consumer-records-&gt;data</span></div></a></li><li class="depth-1"><a href="kinsky.client.html#var-ConsumerDriver"><div class="inner"><span>ConsumerDriver</span></div></a></li><li class="depth-2 branch"><a href="kinsky.client.html#var-commit.21"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>commit!</span></div></a></li><li class="depth-2 branch"><a href="kinsky.client.html#var-pause.21"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pause!</span></div></a></li><li class="depth-2 branch"><a href="kinsky.client.html#var-poll.21"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>poll!</span></div></a></li><li class="depth-2 branch"><a href="kinsky.client.html#var-resume.21"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>resume!</span></div></a></li><li class="depth-2 branch"><a href="kinsky.client.html#var-stop.21"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>stop!</span></div></a></li><li class="depth-2 branch"><a href="kinsky.client.html#var-subscribe.21"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>subscribe!</span></div></a></li><li class="depth-2 branch"><a href="kinsky.client.html#var-unsubscribe.21"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>unsubscribe!</span></div></a></li><li class="depth-2"><a href="kinsky.client.html#var-wake-up.21"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>wake-up!</span></div></a></li><li class="depth-1"><a href="kinsky.client.html#var-cr-.3Edata"><div class="inner"><span>cr-&gt;data</span></div></a></li><li class="depth-1"><a href="kinsky.client.html#var-deserializer"><div class="inner"><span>deserializer</span></div></a></li><li class="depth-1"><a href="kinsky.client.html#var-edn-deserializer"><div class="inner"><span>edn-deserializer</span></div></a></li><li class="depth-1"><a href="kinsky.client.html#var-edn-serializer"><div class="inner"><span>edn-serializer</span></div></a></li><li class="depth-1"><a href="kinsky.client.html#var-GenericDriver"><div class="inner"><span>GenericDriver</span></div></a></li><li class="depth-2"><a href="kinsky.client.html#var-close.21"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>close!</span></div></a></li><li class="depth-1"><a href="kinsky.client.html#var-json-deserializer"><div class="inner"><span>json-deserializer</span></div></a></li><li class="depth-1"><a href="kinsky.client.html#var-json-serializer"><div class="inner"><span>json-serializer</span></div></a></li><li class="depth-1"><a href="kinsky.client.html#var-keyword-deserializer"><div class="inner"><span>keyword-deserializer</span></div></a></li><li class="depth-1"><a href="kinsky.client.html#var-keyword-serializer"><div class="inner"><span>keyword-serializer</span></div></a></li><li class="depth-1"><a href="kinsky.client.html#var-MetadataDriver"><div class="inner"><span>MetadataDriver</span></div></a></li><li class="depth-2"><a href="kinsky.client.html#var-partitions-for"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>partitions-for</span></div></a></li><li class="depth-1"><a href="kinsky.client.html#var-node-.3Edata"><div class="inner"><span>node-&gt;data</span></div></a></li><li class="depth-1"><a href="kinsky.client.html#var-opts-.3Eprops"><div class="inner"><span>opts-&gt;props</span></div></a></li><li class="depth-1"><a href="kinsky.client.html#var-partition-info-.3Edata"><div class="inner"><span>partition-info-&gt;data</span></div></a></li><li class="depth-1"><a href="kinsky.client.html#var-producer"><div class="inner"><span>producer</span></div></a></li><li class="depth-1"><a href="kinsky.client.html#var-producer-.3Edriver"><div class="inner"><span>producer-&gt;driver</span></div></a></li><li class="depth-1"><a href="kinsky.client.html#var-ProducerDriver"><div class="inner"><span>ProducerDriver</span></div></a></li><li class="depth-2 branch"><a href="kinsky.client.html#var-flush.21"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>flush!</span></div></a></li><li class="depth-2"><a href="kinsky.client.html#var-send.21"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>send!</span></div></a></li><li class="depth-1"><a href="kinsky.client.html#var-rebalance-listener"><div class="inner"><span>rebalance-listener</span></div></a></li><li class="depth-1"><a href="kinsky.client.html#var-record-xform"><div class="inner"><span>record-xform</span></div></a></li><li class="depth-1"><a href="kinsky.client.html#var-safe-poll.21"><div class="inner"><span>safe-poll!</span></div></a></li><li class="depth-1"><a href="kinsky.client.html#var-serializer"><div class="inner"><span>serializer</span></div></a></li><li class="depth-1"><a href="kinsky.client.html#var-string-deserializer"><div class="inner"><span>string-deserializer</span></div></a></li><li class="depth-1"><a href="kinsky.client.html#var-string-serializer"><div class="inner"><span>string-serializer</span></div></a></li><li class="depth-1"><a href="kinsky.client.html#var-topic-partition-.3Edata"><div class="inner"><span>topic-partition-&gt;data</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">kinsky.client</h1><div class="doc"><div class="markdown"><p>Small clojure shim on top of the Kafka client API. See <a href="https://github.com/pyr/kinsky">https://github.com/pyr/kinsky</a> for example usage.</p></div></div><div class="public anchor" id="var--.3Eoffset-metadata"><h3>-&gt;offset-metadata</h3><div class="usage"><code>(-&gt;offset-metadata {:keys [offset metadata]})</code></div><div class="doc"><div class="markdown"><p>Yield a OffsetAndMetadata from a clojure map.</p></div></div><div class="src-link"><a href="https://github.com/pyr/kinsky/blob/0.1.10-SNAPSHOT/src/kinsky/client.clj#L218">view source</a></div></div><div class="public anchor" id="var--.3Erecord"><h3>-&gt;record</h3><div class="usage"><code>(-&gt;record payload)</code></div><div class="doc"><div class="markdown"><p>Build a producer record from a clojure map. Leave ProducerRecord instances untouched.</p></div></div><div class="src-link"><a href="https://github.com/pyr/kinsky/blob/0.1.10-SNAPSHOT/src/kinsky/client.clj#L393">view source</a></div></div><div class="public anchor" id="var--.3Etopic-partition"><h3>-&gt;topic-partition</h3><div class="usage"><code>(-&gt;topic-partition {:keys [topic partition]})</code></div><div class="doc"><div class="markdown"><p>Yield a TopicPartition from a clojure map.</p></div></div><div class="src-link"><a href="https://github.com/pyr/kinsky/blob/0.1.10-SNAPSHOT/src/kinsky/client.clj#L213">view source</a></div></div><div class="public anchor" id="var--.3Etopics"><h3>-&gt;topics</h3><div class="usage"><code>(-&gt;topics topics)</code></div><div class="doc"><div class="markdown"><p>Yield a valid object for subscription</p></div></div><div class="src-link"><a href="https://github.com/pyr/kinsky/blob/0.1.10-SNAPSHOT/src/kinsky/client.clj#L311">view source</a></div></div><div class="public anchor" id="var-consumer"><h3>consumer</h3><div class="usage"><code>(consumer config)</code><code>(consumer config callback)</code><code>(consumer config kdeserializer vdeserializer)</code><code>(consumer config callback kdeserializer vdeserializer)</code></div><div class="doc"><div class="markdown"><p>Create a consumer from a configuration and optional deserializers. If a callback is given, call it when stopping the consumer. If deserializers are provided, use them otherwise expect deserializer class name in the config map.</p></div></div><div class="src-link"><a href="https://github.com/pyr/kinsky/blob/0.1.10-SNAPSHOT/src/kinsky/client.clj#L460">view source</a></div></div><div class="public anchor" id="var-consumer-.3Edriver"><h3>consumer-&gt;driver</h3><div class="usage"><code>(consumer-&gt;driver consumer)</code><code>(consumer-&gt;driver consumer run-signal)</code></div><div class="doc"><div class="markdown"><p>Given a consumer-driver and an optional callback to callback to call when stopping, yield a consumer driver.</p>
<p>The consumer driver implements the following protocols:</p>
<ul>
  <li><a href="#var-ConsumerDriver">ConsumerDriver</a></li>
  <li><a href="#var-MetadataDriver">MetadataDriver</a></li>
  <li><code>clojure.lang.IDeref</code>: <code>deref</code> to access underlying  <a href="http://kafka.apache.org/090/javadoc/org/apache/kafka/clients/producer/KafkaConsumer.html">KafkaConsumer</a>  instance.</li>
</ul></div></div><div class="src-link"><a href="https://github.com/pyr/kinsky/blob/0.1.10-SNAPSHOT/src/kinsky/client.clj#L320">view source</a></div></div><div class="public anchor" id="var-consumer-records-.3Edata"><h3>consumer-records-&gt;data</h3><div class="usage"><code>(consumer-records-&gt;data crs)</code></div><div class="doc"><div class="markdown"><p>Yield the clojure representation of topic</p></div></div><div class="src-link"><a href="https://github.com/pyr/kinsky/blob/0.1.10-SNAPSHOT/src/kinsky/client.clj#L297">view source</a></div></div><div class="public anchor" id="var-ConsumerDriver"><h3>ConsumerDriver</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Driver interface for consumers</p></div></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var-commit.21"><h3>commit!</h3><div class="usage"><code>(commit! this)</code><code>(commit! this topic-offsets)</code></div><div class="doc"><div class="markdown"><p>Commit offsets for a consumer. The topic-offsets argument must be a list of maps of the form:</p>
<pre><code>{:topic     topic
 :partition partition
 :offset    offset
 :metadata  metadata}
</code></pre>
<p>The topic and partition tuple must be unique across the whole list.</p></div></div></div><div class="public anchor" id="var-pause.21"><h3>pause!</h3><div class="usage"><code>(pause! this)</code><code>(pause! this topic-partitions)</code></div><div class="doc"><div class="markdown"><p>Pause consumption.</p></div></div></div><div class="public anchor" id="var-poll.21"><h3>poll!</h3><div class="usage"><code>(poll! this timeout)</code></div><div class="doc"><div class="markdown"><p>Poll for new messages. Timeout in ms. The result is a data representation of a ConsumerRecords instance.</p>
<pre><code>{:partitions [[&quot;t&quot; 0] [&quot;t&quot; 1]]
 :topics     [&quot;t&quot;]
 :count      2
 :by-partition {[&quot;t&quot; 0] [{:key       &quot;k0&quot;
                            :offset    1
                            :partition 0
                            :topic     &quot;t&quot;
                            :value     &quot;v0&quot;}]
                [&quot;t&quot; 1] [{:key       &quot;k1&quot;
                            :offset    1
                            :partition 1
                            :topic     &quot;t&quot;
                            :value     &quot;v1&quot;}]}
 :by-topic      {&quot;t&quot; [{:key       &quot;k0&quot;
                         :offset    1
                         :partition 0
                         :topic     &quot;t&quot;
                         :value     &quot;v0&quot;}
                        {:key       &quot;k1&quot;
                         :offset    1
                         :partition 1
                         :topic     &quot;t&quot;
                         :value     &quot;v1&quot;}]}}
</code></pre></div></div></div><div class="public anchor" id="var-resume.21"><h3>resume!</h3><div class="usage"><code>(resume! this topic-partitions)</code></div><div class="doc"><div class="markdown"><p>Resume consumption.</p></div></div></div><div class="public anchor" id="var-stop.21"><h3>stop!</h3><div class="usage"><code>(stop! this)</code><code>(stop! this timeout)</code></div><div class="doc"><div class="markdown"><p>Stop consumption.</p></div></div></div><div class="public anchor" id="var-subscribe.21"><h3>subscribe!</h3><div class="usage"><code>(subscribe! this topics)</code><code>(subscribe! this topics listener)</code></div><div class="doc"><div class="markdown"><p>Subscribe to a topic or list of topics. The topics argument can be:</p>
<ul>
  <li>A simple string when subscribing to a single topic</li>
  <li>A regex pattern to subscribe to matching topics</li>
  <li>A sequence of strings</li>
</ul>
<p>The optional listener argument is either a callback function or an implementation of <a href="http://kafka.apache.org/090/javadoc/org/apache/kafka/clients/consumer/ConsumerRebalanceListener.html">ConsumerRebalanceListener</a>.</p>
<p>When a function is supplied, it will be called on relance events with a map representing the event, see <a href="#var-rebalance-listener">kinsky.client/rebalance-listener</a> for details on the map format.</p></div></div></div><div class="public anchor" id="var-unsubscribe.21"><h3>unsubscribe!</h3><div class="usage"><code>(unsubscribe! this)</code></div><div class="doc"><div class="markdown"><p>Unsubscribe from currently subscribed topics.</p></div></div></div><div class="public anchor" id="var-wake-up.21"><h3>wake-up!</h3><div class="usage"><code>(wake-up! this)</code></div><div class="doc"><div class="markdown"><p>Safely wake-up a consumer which may be blocking during polling.</p></div></div></div></div></div><div class="src-link"><a href="https://github.com/pyr/kinsky/blob/0.1.10-SNAPSHOT/src/kinsky/client.clj#L36">view source</a></div></div><div class="public anchor" id="var-cr-.3Edata"><h3>cr-&gt;data</h3><div class="usage"><code>(cr-&gt;data cr)</code></div><div class="doc"><div class="markdown"><p>Yield a clojure representation of a consumer record</p></div></div><div class="src-link"><a href="https://github.com/pyr/kinsky/blob/0.1.10-SNAPSHOT/src/kinsky/client.clj#L288">view source</a></div></div><div class="public anchor" id="var-deserializer"><h3>deserializer</h3><div class="usage"><code>(deserializer f)</code></div><div class="doc"><div class="markdown"><p>Yield an instance of a deserializer from a function of two arguments: a topic and the payload to deserialize.</p></div></div><div class="src-link"><a href="https://github.com/pyr/kinsky/blob/0.1.10-SNAPSHOT/src/kinsky/client.clj#L151">view source</a></div></div><div class="public anchor" id="var-edn-deserializer"><h3>edn-deserializer</h3><div class="usage"><code>(edn-deserializer)</code></div><div class="doc"><div class="markdown"><p>Deserialize EDN.</p></div></div><div class="src-link"><a href="https://github.com/pyr/kinsky/blob/0.1.10-SNAPSHOT/src/kinsky/client.clj#L162">view source</a></div></div><div class="public anchor" id="var-edn-serializer"><h3>edn-serializer</h3><div class="usage"><code>(edn-serializer)</code></div><div class="doc"><div class="markdown"><p>Serialize as EDN.</p></div></div><div class="src-link"><a href="https://github.com/pyr/kinsky/blob/0.1.10-SNAPSHOT/src/kinsky/client.clj#L129">view source</a></div></div><div class="public anchor" id="var-GenericDriver"><h3>GenericDriver</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var-close.21"><h3>close!</h3><div class="usage"><code>(close! this)</code><code>(close! this timeout)</code></div><div class="doc"><div class="markdown"><p>Close this driver</p></div></div></div></div></div><div class="src-link"><a href="https://github.com/pyr/kinsky/blob/0.1.10-SNAPSHOT/src/kinsky/client.clj#L114">view source</a></div></div><div class="public anchor" id="var-json-deserializer"><h3>json-deserializer</h3><div class="usage"><code>(json-deserializer)</code></div><div class="doc"><div class="markdown"><p>Deserialize JSON.</p></div></div><div class="src-link"><a href="https://github.com/pyr/kinsky/blob/0.1.10-SNAPSHOT/src/kinsky/client.clj#L170">view source</a></div></div><div class="public anchor" id="var-json-serializer"><h3>json-serializer</h3><div class="usage"><code>(json-serializer)</code></div><div class="doc"><div class="markdown"><p>Serialize as JSON through cheshire.</p></div></div><div class="src-link"><a href="https://github.com/pyr/kinsky/blob/0.1.10-SNAPSHOT/src/kinsky/client.clj#L135">view source</a></div></div><div class="public anchor" id="var-keyword-deserializer"><h3>keyword-deserializer</h3><div class="usage"><code>(keyword-deserializer)</code></div><div class="doc"><div class="markdown"><p>Deserialize a string and then keywordize it.</p></div></div><div class="src-link"><a href="https://github.com/pyr/kinsky/blob/0.1.10-SNAPSHOT/src/kinsky/client.clj#L178">view source</a></div></div><div class="public anchor" id="var-keyword-serializer"><h3>keyword-serializer</h3><div class="usage"><code>(keyword-serializer)</code></div><div class="doc"><div class="markdown"><p>Serialize keywords to strings, useful for keys.</p></div></div><div class="src-link"><a href="https://github.com/pyr/kinsky/blob/0.1.10-SNAPSHOT/src/kinsky/client.clj#L141">view source</a></div></div><div class="public anchor" id="var-MetadataDriver"><h3>MetadataDriver</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Common properties for all drivers</p></div></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var-partitions-for"><h3>partitions-for</h3><div class="usage"><code>(partitions-for this topic)</code></div><div class="doc"><div class="markdown"><p>Retrieve partition ownership information for a topic. The result is a data representation of a <a href="http://kafka.apache.org/090/javadoc/org/apache/kafka/common/PartitionInfo.html">PartitionInfo</a> list. The structure for a partition info map is:</p>
<pre><code>{:topic     &quot;t&quot;
 :partition 0
 :isr       [{:host &quot;x&quot; :id 0 :port 9092}]
 :leader    {:host &quot;x&quot; :id 0 :port 9092}
 :replicas  [{:host &quot;x&quot; :id 0 :port 9092}]
</code></pre></div></div></div></div></div><div class="src-link"><a href="https://github.com/pyr/kinsky/blob/0.1.10-SNAPSHOT/src/kinsky/client.clj#L21">view source</a></div></div><div class="public anchor" id="var-node-.3Edata"><h3>node-&gt;data</h3><div class="usage"><code>(node-&gt;data n)</code></div><div class="doc"><div class="markdown"><p>Yield a clojure representation of a node.</p></div></div><div class="src-link"><a href="https://github.com/pyr/kinsky/blob/0.1.10-SNAPSHOT/src/kinsky/client.clj#L223">view source</a></div></div><div class="public anchor" id="var-opts-.3Eprops"><h3>opts-&gt;props</h3><div class="usage"><code>(opts-&gt;props opts)</code></div><div class="doc"><div class="markdown"><p>Kakfa configs are now maps of strings to strings. Morph an arbitrary clojure map into this representation.</p></div></div><div class="src-link"><a href="https://github.com/pyr/kinsky/blob/0.1.10-SNAPSHOT/src/kinsky/client.clj#L188">view source</a></div></div><div class="public anchor" id="var-partition-info-.3Edata"><h3>partition-info-&gt;data</h3><div class="usage"><code>(partition-info-&gt;data pi)</code></div><div class="doc"><div class="markdown"><p>Yield a clojure representation of a partition-info.</p></div></div><div class="src-link"><a href="https://github.com/pyr/kinsky/blob/0.1.10-SNAPSHOT/src/kinsky/client.clj#L230">view source</a></div></div><div class="public anchor" id="var-producer"><h3>producer</h3><div class="usage"><code>(producer config)</code><code>(producer config serializer)</code><code>(producer config kserializer vserializer)</code></div><div class="doc"><div class="markdown"><p>Create a producer from a configuration and optional serializers. If a single serializer is provided, it will be used for both keys and values. If none are provided, the configuration is expected to hold serializer class names.</p></div></div><div class="src-link"><a href="https://github.com/pyr/kinsky/blob/0.1.10-SNAPSHOT/src/kinsky/client.clj#L444">view source</a></div></div><div class="public anchor" id="var-producer-.3Edriver"><h3>producer-&gt;driver</h3><div class="usage"><code>(producer-&gt;driver producer)</code></div><div class="doc"><div class="markdown"><p>Yield a driver from a Kafka Producer. The producer driver implements the following protocols:</p>
<ul>
  <li><a href="#var-ProducerDriver">ProducerDriver</a></li>
  <li><a href="#var-MetadataDriver">MetadataDriver</a></li>
  <li><code>clojure.lang.IDeref</code>: <code>deref</code> to access underlying  <a href="http://kafka.apache.org/090/javadoc/org/apache/kafka/clients/producer/KafkaProducer.html">KafkaProducer</a>  instance.</li>
</ul></div></div><div class="src-link"><a href="https://github.com/pyr/kinsky/blob/0.1.10-SNAPSHOT/src/kinsky/client.clj#L414">view source</a></div></div><div class="public anchor" id="var-ProducerDriver"><h3>ProducerDriver</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Driver interface for producers</p></div></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var-flush.21"><h3>flush!</h3><div class="usage"><code>(flush! this)</code></div><div class="doc"><div class="markdown"><p>Ensure that produced messages are flushed.</p></div></div></div><div class="public anchor" id="var-send.21"><h3>send!</h3><div class="usage"><code>(send! this record)</code><code>(send! this topic k v)</code></div><div class="doc"><div class="markdown"><p>Produce a record on a topic. When using the single arity version, a map with the following possible keys is expected: <code>:key</code>, <code>:topic</code>, <code>:partition</code>, and <code>:value</code>.</p></div></div></div></div></div><div class="src-link"><a href="https://github.com/pyr/kinsky/blob/0.1.10-SNAPSHOT/src/kinsky/client.clj#L103">view source</a></div></div><div class="public anchor" id="var-rebalance-listener"><h3>rebalance-listener</h3><div class="usage"><code>(rebalance-listener callback)</code></div><div class="doc"><div class="markdown"><p>Wrap a callback to yield an instance of a Kafka ConsumerRebalanceListener. The callback is a function of one argument, a map containing the following keys: :event, :topic and :partition. :event will be either :assigned or :revoked.</p></div></div><div class="src-link"><a href="https://github.com/pyr/kinsky/blob/0.1.10-SNAPSHOT/src/kinsky/client.clj#L194">view source</a></div></div><div class="public anchor" id="var-record-xform"><h3>record-xform</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>A transducer to explode grouped records into individual entities.</p>
<p>When sucessful, the output of kinsky.client/poll! takes the form:</p>
<pre><code>{:partitions   [[&quot;t&quot; 0] [&quot;t&quot; 1]]
 :topics       #{&quot;t&quot;}
 :count        2
 :by-partition {[&quot;t&quot; 0] [{:key       &quot;k0&quot;
                            :offset    1
                            :partition 0
                            :topic     &quot;t&quot;
                            :value     &quot;v0&quot;}]
                [&quot;t&quot; 1] [{:key       &quot;k1&quot;
                            :offset    1
                            :partition 1
                            :topic     &quot;t&quot;
                            :value     &quot;v1&quot;}]}
 :by-topic      {&quot;t&quot; [{:key       &quot;k0&quot;
                         :offset    1
                         :partition 0
                         :topic     &quot;t&quot;
                         :value     &quot;v0&quot;}
                        {:key       &quot;k1&quot;
                         :offset    1
                         :partition 1
                         :topic     &quot;t&quot;
                         :value     &quot;v1&quot;}]}}
</code></pre>
<p>To make working with the output channel easier, this transducer morphs these messages into a list of distinct records:</p>
<pre><code>({:key &quot;k0&quot; :offset 1 :partition 0 :topic &quot;t&quot; :value &quot;v0&quot;}
 {:key &quot;k1&quot; :offset 1 :partition 1 :topic &quot;t&quot; :value &quot;v1&quot;}
 ...)
</code></pre></div></div><div class="src-link"><a href="https://github.com/pyr/kinsky/blob/0.1.10-SNAPSHOT/src/kinsky/client.clj#L245">view source</a></div></div><div class="public anchor" id="var-safe-poll.21"><h3>safe-poll!</h3><div class="usage"><code>(safe-poll! consumer timeout)</code></div><div class="doc"><div class="markdown"><p>Implementation of poll which disregards wake-up exceptions</p></div></div><div class="src-link"><a href="https://github.com/pyr/kinsky/blob/0.1.10-SNAPSHOT/src/kinsky/client.clj#L386">view source</a></div></div><div class="public anchor" id="var-serializer"><h3>serializer</h3><div class="usage"><code>(serializer f)</code></div><div class="doc"><div class="markdown"><p>Yield an instance of a serializer from a function of two arguments: a topic and the payload to serialize.</p></div></div><div class="src-link"><a href="https://github.com/pyr/kinsky/blob/0.1.10-SNAPSHOT/src/kinsky/client.clj#L118">view source</a></div></div><div class="public anchor" id="var-string-deserializer"><h3>string-deserializer</h3><div class="usage"><code>(string-deserializer)</code></div><div class="doc"><div class="markdown"><p>Kafka&rsquo;s own string deserializer</p></div></div><div class="src-link"><a href="https://github.com/pyr/kinsky/blob/0.1.10-SNAPSHOT/src/kinsky/client.clj#L183">view source</a></div></div><div class="public anchor" id="var-string-serializer"><h3>string-serializer</h3><div class="usage"><code>(string-serializer)</code></div><div class="doc"><div class="markdown"><p>Kafka&rsquo;s own string serializer.</p></div></div><div class="src-link"><a href="https://github.com/pyr/kinsky/blob/0.1.10-SNAPSHOT/src/kinsky/client.clj#L146">view source</a></div></div><div class="public anchor" id="var-topic-partition-.3Edata"><h3>topic-partition-&gt;data</h3><div class="usage"><code>(topic-partition-&gt;data tp)</code></div><div class="doc"><div class="markdown"><p>Yield a clojure representation of a topic-partition</p></div></div><div class="src-link"><a href="https://github.com/pyr/kinsky/blob/0.1.10-SNAPSHOT/src/kinsky/client.clj#L239">view source</a></div></div></div></body></html>